<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>US GDP Bar Chart</title>
  <script src="https://d3js.org/d3.v7.min.js"></script>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      min-height: 100vh;
      display: flex;
      justify-content: center;
      align-items: center;
      padding: 20px;
    }

    #container {
      background: white;
      border-radius: 16px;
      box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
      padding: 40px;
      max-width: 1000px;
      width: 100%;
    }

    #title {
      text-align: center;
      font-size: 32px;
      font-weight: 700;
      color: #2d3748;
      margin-bottom: 10px;
      letter-spacing: -0.5px;
    }

    #subtitle {
      text-align: center;
      font-size: 16px;
      color: #718096;
      margin-bottom: 40px;
    }

    #chart {
      display: flex;
      justify-content: center;
    }

    .bar {
      fill: #667eea;
      transition: fill 0.2s ease;
    }

    .bar:hover {
      fill: #764ba2;
    }

    .axis {
      font-size: 12px;
    }

    .axis path,
    .axis line {
      stroke: #cbd5e0;
    }

    .axis text {
      fill: #4a5568;
    }

    #tooltip {
      position: absolute;
      background: rgba(45, 55, 72, 0.95);
      color: white;
      padding: 12px 16px;
      border-radius: 8px;
      font-size: 14px;
      pointer-events: none;
      opacity: 0;
      transition: opacity 0.2s ease;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
    }

    #tooltip.show {
      opacity: 1;
    }

    .tooltip-date {
      font-weight: 600;
      margin-bottom: 4px;
    }

    .tooltip-gdp {
      color: #a0aec0;
    }
  </style>
</head>
<body>
  <div id="container">
    <h1 id="title">United States GDP</h1>
    <p id="subtitle">Gross Domestic Product (1947-2015)</p>
    <div id="chart"></div>
  </div>
  <div id="tooltip"></div>

  <script>
    // Dimensions and margins
    const margin = { top: 20, right: 30, bottom: 50, left: 70 };
    const width = 900 - margin.left - margin.right;
    const height = 500 - margin.top - margin.bottom;

    // Create SVG
    const svg = d3.select('#chart')
      .append('svg')
      .attr('width', width + margin.left + margin.right)
      .attr('height', height + margin.top + margin.bottom)
      .append('g')
      .attr('transform', `translate(${margin.left}, ${margin.top})`);

    // Tooltip
    const tooltip = d3.select('#tooltip');

    // Fetch and render data
    fetch('https://raw.githubusercontent.com/freeCodeCamp/ProjectReferenceData/master/GDP-data.json')
      .then(response => response.json())
      .then(json => {
        const data = json.data;

        // Parse dates and values
        const dataset = data.map(d => ({
          date: new Date(d[0]),
          dateString: d[0],
          gdp: d[1]
        }));

        // Scales
        const xScale = d3.scaleTime()
          .domain([d3.min(dataset, d => d.date), d3.max(dataset, d => d.date)])
          .range([0, width]);

        const yScale = d3.scaleLinear()
          .domain([0, d3.max(dataset, d => d.gdp)])
          .range([height, 0]);

        // Axes
        const xAxis = d3.axisBottom(xScale);
        const yAxis = d3.axisLeft(yScale);

        // Add X axis
        svg.append('g')
          .attr('id', 'x-axis')
          .attr('class', 'axis')
          .attr('transform', `translate(0, ${height})`)
          .call(xAxis);

        // Add Y axis
        svg.append('g')
          .attr('id', 'y-axis')
          .attr('class', 'axis')
          .call(yAxis);

        // Add Y axis label
        svg.append('text')
          .attr('transform', 'rotate(-90)')
          .attr('x', -height / 2)
          .attr('y', -50)
          .attr('text-anchor', 'middle')
          .style('font-size', '14px')
          .style('fill', '#4a5568')
          .text('GDP (Billions of USD)');

        // Bar width
        const barWidth = width / dataset.length;

        // Create bars
        svg.selectAll('.bar')
          .data(dataset)
          .enter()
          .append('rect')
          .attr('class', 'bar')
          .attr('data-date', d => d.dateString)
          .attr('data-gdp', d => d.gdp)
          .attr('x', (d, i) => i * barWidth)
          .attr('y', d => yScale(d.gdp))
          .attr('width', barWidth)
          .attr('height', d => height - yScale(d.gdp))
          .on('mouseover', function(event, d) {
            // Format date
            const formatDate = d3.timeFormat('%Y - Q%q');
            const quarter = Math.floor(d.date.getMonth() / 3) + 1;
            const year = d.date.getFullYear();
            const dateText = `${year} - Q${quarter}`;

            // Format GDP
            const gdpText = `$${d.gdp.toFixed(1)} Billion`;

            // Update tooltip
            tooltip
              .attr('data-date', d.dateString)
              .html(`
                <div class="tooltip-date">${dateText}</div>
                <div class="tooltip-gdp">${gdpText}</div>
              `)
              .style('left', `${event.pageX + 10}px`)
              .style('top', `${event.pageY - 40}px`)
              .classed('show', true);
          })
          .on('mouseout', function() {
            tooltip.classed('show', false);
          });
      })
      .catch(error => {
        console.error('Error loading data:', error);
      });
  </scri
</body>
</html>
